# 服务器配置

## 1 前言

使用自己的PC主机进行代码编译或管理，便于对代码进行编写。

## 2 服务器安装与软件配置

默认Linux环境，安装Ubuntu22

## 3 环境配置

### 3.1 登录与更改密码

```shell
useradd -s '/bin/bash' -m -G adm, sudo biplab
passwd biplab
passwd root
```

### 3.1 换源

> vim /etc/apt/sources.list 

加入以下内容，Ubuntu 22 是 jammy，其他版本的Ubuntu需要更改 jammy 这个词

```shell
deb http://repo.huaweicloud.com/ubuntu/ jammy main restricted universe multiverse
#deb-src http://repo.huaweicloud.com/ubuntu-ports/ jammy main restricted universe multiverse
deb http://repo.huaweicloud.com/ubuntu/ jammy-security main restricted universe multiverse
#deb-src http://repo.huaweicloud.com/ubuntu-ports/ jammy-security main restricted universe multiverse
deb http://repo.huaweicloud.com/ubuntu/ jammy-updates main restricted universe multiverse
#deb-src http://repo.huaweicloud.com/ubuntu-ports/ jammy-updates main restricted universe multiverse
deb http://repo.huaweicloud.com/ubuntu/ jammy-backports main restricted universe multiverse
#deb-src http://repo.huaweicloud.com/ubuntu-ports/ jammy-backports main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse

deb http://mirrors.163.com/ubuntu/ jammy main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ jammy-security main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ jammy-updates main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ jammy-proposed main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ jammy-backports main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ jammy main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ jammy-security main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ jammy-updates main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ jammy-proposed main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ jammy-backports main restricted universe multiverse
```

### 3.2 使能root登录

使能root登录，便于Xshell连接

```shell
vim /etc/ssh/sshd_config

PermitRootLogin prohibit-password  # 更改为  
PermitRootLogin yes

# :wq退出
service sshd restart # 重启服务
```

### 3.3 虚拟环境创建

在 [Pytorch 官网](https://pytorch.org/get-started/locally/) 安装最新cuda环境

```shell
# 在自己的账户中下载，不安装Anaconda，miniconda最小化安装
wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/Miniconda3-latest-Linux-x86_64.sh
bash Miniconda3-latest-Linux-x86_64.sh # 一直Enter

# 设置通道和优先级
conda config --add channels http://mirrors.aliyun.com/anaconda/pkgs/main
conda config --add channels http://mirrors.aliyun.com/anaconda/pkgs/r
conda config --add channels http://mirrors.aliyun.com/anaconda/pkgs/msys2
conda config --add channels conda-forge
conda config --set channel_priority flexible
conda config --set show_channel_urls yes

conda config --set auto_activate_base false
conda create -n DeepLearning python==3.11 # DeepLearning可更换自己的名字
conda activate DeepLearning
vim ~/.bashrc  # 加入conda DeepLearning pytorch启用 DeepLearning环境
conda install pytorch torchvision torchaudio pytorch-cuda=12.1 -c pytorch -c nvidia # 安装cuda

conda clean --packages && conda clean --all && conda update --all # 清理不需要的缓存
```

### 3.4 软件安装

```shell
# 开发工具
sudo apt install -y dialog systemd htop vim git network-manager net-tools iputils-ping ifupdown firewalld firewall-config openssh-server apt-transport-https apt-utils usbutils udhcpc tree cmake vlc cheese gparted ssh gcc libssl-dev liblz4-tool bison flex fakeroot unzip device-tree-compiler python3-pip gperf pkg-config gdb-multiarch build-essential wakeonlan ethtool cmake-curses-gui gdb meson v4l-utils stress-ng sysbench gcc-aarch64-linux-gnu g++-aarch64-linux-gnu gfortran-aarch64-linux-gnu libgtk-3-dev nvidia-cuda-toolkit

# 远程桌面
sudo apt install ubuntu-desktop lightdm xubuntu-desktop xfce4 xfce4-goodies ubuntu-gnome-desktop gnome-shell tigervnc-standalone-server

snap install vscode 
```

### 3.5 固态硬盘挂载

因为训练数据集存放于固态硬盘有利于加快训练速度，建议多准备一块固态硬盘专门来和/home目录关联

https://huangwenwei.com/blogs/ubuntu-mount-disk

```shell
ln -s /opt/dataset/ /home/data/
chmod 777 /home/data/
```

### 3.6 开源库安装







## 参考引用

